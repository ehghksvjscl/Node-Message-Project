{"ast":null,"code":"var _jsxFileName = \"/Users/saemihong/Desktop/Node-Message-Project/client/src/components/views/MessageInputPage/MessageInputPage.js\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport PinkButton from '../../common/Buttons/PinkButton';\nimport MessageInput from '..//../../assets/messageInput.png';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ani01 from '../../../assets/icons/ani01.png';\nimport ani02 from '../../../assets/icons/ani02.png';\nimport ani03 from '../../../assets/icons/ani03.png';\nimport ani04 from '../../../assets/icons/ani04.png';\nimport ani05 from '../../../assets/icons/ani05.png';\nimport ani06 from '../../../assets/icons/ani06.png';\nimport Axios from 'axios';\nimport { useAlert } from 'react-alert';\nconst StyledMessageInput = styled.div`\n    width: 100%;\n    height: 393px;\n    background-image: url(${MessageInput});\n    background-size: cover;\n    background-repeat: no-repeat;\n    position: relative;\n    \n`;\nconst StyledTo = styled.p`\n    font-size: 24px;\n    color: #000;\n    position: absolute;\n    top: 15%;\n    left: 10%;\n`;\nconst StyledFrom = styled.p`\n    font-size: 24px;\n    color: #000;\n    position: absolute;\n    Bottom: 10%;\n    left: 13%;\n`;\nconst StyledTextArea = styled.textarea`\n    width: 70%;\n    height: 185px;\n    position: absolute;\n    top: 25%;\n    left: 10%;\n    resize: none;\n    border: none;\n    font-size: 24px;\n`;\nconst StyledIcon = styled.img`\n    position: absolute;\n    top:-8%;\n    left: 35%;\n`;\nconst StyledSenderInput = styled.input`\n    width: 70%;\n    border: none;\n`;\n\nfunction MessageInputPage() {\n  const alert = useAlert();\n  const location = useLocation();\n  const history = useHistory();\n  const [recepient, setRecepient] = useState(\"\");\n  const [sender, setSender] = useState(\"\");\n  const [icon, setIcon] = useState(1);\n  const animals = [{\n    num: 1,\n    path: ani01\n  }, {\n    num: 2,\n    path: ani02\n  }, {\n    num: 3,\n    path: ani03\n  }, {\n    num: 4,\n    path: ani04\n  }, {\n    num: 5,\n    path: ani05\n  }, {\n    num: 6,\n    path: ani06\n  }];\n  const textAreaRef = useRef();\n  const FromInput = useRef();\n  useEffect(() => {\n    setRecepient(window.localStorage.getItem(\"userName\"));\n    console.log(location.state.Iconid);\n    const pickedIcon = animals.find(icon => icon.num === location.state.Iconid);\n    setIcon(pickedIcon.path);\n  }, []);\n\n  const handleOnchangeSender = e => {\n    setSender(e.target.value);\n  };\n\n  const handleNextButton = () => {\n    const {\n      userId,\n      Iconid\n    } = location.state;\n    let body = {\n      user_id: userId,\n      badge: Iconid,\n      content: textAreaRef.current.value,\n      fromUserName: FromInput.current.value\n    };\n    Axios.post(\"http://localhost:5000/api/messages/addMessage\", body).then(response => {\n      if (response.data.success) {\n        history.push({\n          pathname: \"/completed\"\n        });\n      } else {\n        // 각각 예외처리 필요\n        alert.error(\"메세지 전송에 실패 했습니다.\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(StyledMessageInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(StyledTo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, \"To.\", recepient), /*#__PURE__*/React.createElement(StyledIcon, {\n    src: icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(StyledTextArea, {\n    maxLength: \"300\",\n    ref: textAreaRef,\n    placeholder: \"\\uBA54\\uC138\\uC9C0\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(StyledFrom, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, \"From.\", /*#__PURE__*/React.createElement(StyledSenderInput, {\n    ref: FromInput,\n    name: \"senderName\",\n    onChange: handleOnchangeSender,\n    value: sender,\n    placeholder: \"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 34\n    }\n  }))), /*#__PURE__*/React.createElement(\"footer\", {\n    onClick: handleNextButton,\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PinkButton, {\n    name: \"\\uB2E4\\uC74C\\uC73C\\uB85C\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  })));\n}\n\nexport default MessageInputPage;","map":{"version":3,"sources":["/Users/saemihong/Desktop/Node-Message-Project/client/src/components/views/MessageInputPage/MessageInputPage.js"],"names":["React","useEffect","useState","useRef","styled","PinkButton","MessageInput","useHistory","useLocation","ani01","ani02","ani03","ani04","ani05","ani06","Axios","useAlert","StyledMessageInput","div","StyledTo","p","StyledFrom","StyledTextArea","textarea","StyledIcon","img","StyledSenderInput","input","MessageInputPage","alert","location","history","recepient","setRecepient","sender","setSender","icon","setIcon","animals","num","path","textAreaRef","FromInput","window","localStorage","getItem","console","log","state","Iconid","pickedIcon","find","handleOnchangeSender","e","target","value","handleNextButton","userId","body","user_id","badge","content","current","fromUserName","post","then","response","data","success","push","pathname","error","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\nimport styled from 'styled-components';\nimport PinkButton from '../../common/Buttons/PinkButton';\nimport MessageInput from '..//../../assets/messageInput.png';\nimport {useHistory,useLocation} from 'react-router-dom'\nimport ani01 from '../../../assets/icons/ani01.png'\nimport ani02 from '../../../assets/icons/ani02.png'\nimport ani03 from '../../../assets/icons/ani03.png'\nimport ani04 from '../../../assets/icons/ani04.png'\nimport ani05 from '../../../assets/icons/ani05.png'\nimport ani06 from '../../../assets/icons/ani06.png'\nimport Axios from 'axios';\nimport { useAlert } from 'react-alert'\n\n\n\nconst StyledMessageInput = styled.div`\n    width: 100%;\n    height: 393px;\n    background-image: url(${MessageInput});\n    background-size: cover;\n    background-repeat: no-repeat;\n    position: relative;\n    \n`\nconst StyledTo = styled.p`\n    font-size: 24px;\n    color: #000;\n    position: absolute;\n    top: 15%;\n    left: 10%;\n`\nconst StyledFrom = styled.p`\n    font-size: 24px;\n    color: #000;\n    position: absolute;\n    Bottom: 10%;\n    left: 13%;\n`\n\nconst StyledTextArea = styled.textarea`\n    width: 70%;\n    height: 185px;\n    position: absolute;\n    top: 25%;\n    left: 10%;\n    resize: none;\n    border: none;\n    font-size: 24px;\n`\n\nconst StyledIcon = styled.img`\n    position: absolute;\n    top:-8%;\n    left: 35%;\n`\n\nconst StyledSenderInput = styled.input`\n    width: 70%;\n    border: none;\n`\n\nfunction MessageInputPage() {\n    const alert = useAlert()\n    const location = useLocation();\n    const history = useHistory()\n    const [ recepient, setRecepient ] = useState(\"\")\n    const [ sender, setSender ] = useState(\"\")\n    const [icon, setIcon] = useState(1)\n    const animals = [\n        {num: 1, path : ani01},\n        {num: 2, path : ani02},\n        {num: 3, path : ani03},\n        {num: 4, path : ani04},\n        {num: 5, path : ani05},\n        {num: 6, path : ani06},\n        ]\n    const textAreaRef = useRef()\n    const FromInput = useRef()\n\n    useEffect(()=>{\n        setRecepient(window.localStorage.getItem(\"userName\"))\n        console.log(location.state.Iconid);\n        const pickedIcon = animals.find(icon => icon.num === location.state.Iconid)\n        setIcon(pickedIcon.path)\n    }, [])\n\n    const handleOnchangeSender=(e)=>{\n        setSender(e.target.value)\n    }\n\n    const handleNextButton=()=>{\n        const {userId, Iconid} = location.state\n\n        let body = {\n            user_id: userId,\n            badge: Iconid,\n            content: textAreaRef.current.value,\n            fromUserName: FromInput.current.value\n        }\n\n        Axios.post(\"http://localhost:5000/api/messages/addMessage\", body)\n        .then(response => {\n            if(response.data.success) {\n                history.push({\n                    pathname: \"/completed\",\n                })\n            } else {\n                // 각각 예외처리 필요\n                alert.error(\"메세지 전송에 실패 했습니다.\")\n            }\n        })\n\n    }\n\n    return (\n        <div className='app'>\n            <StyledMessageInput>\n                <StyledTo>To.{recepient}</StyledTo>\n                <StyledIcon src={icon} />\n                <StyledTextArea maxLength=\"300\" ref={textAreaRef} placeholder='메세지를 입력해주세요...'/>\n                <StyledFrom>From.<StyledSenderInput ref={FromInput} name=\"senderName\" onChange={handleOnchangeSender} value={sender} placeholder=\"이름을 입력해주세요\"/></StyledFrom>\n            </StyledMessageInput>\n            <footer onClick={handleNextButton} style={{width: \"100%\"}}>\n            <PinkButton name=\"다음으로\"/>\n            </footer>\n        </div>\n    )\n}\n\nexport default MessageInputPage\n"]},"metadata":{},"sourceType":"module"}